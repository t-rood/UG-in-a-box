add ssl certKey SAML_SP_ShareFile -cert SAML_SP_sharefile.crt
add authentication samlIdPProfile AUTHS_SAML_ShareFile -samlSPCertName SAML_SP_ShareFile -samlIdPCertName SAML_IdP -assertionConsumerServiceURL "https://<###ShareFile_FQDN###/>/saml/acs" -samlIssuerName <###IdP_Identifier###/> -audience "https://<###ShareFile_FQDN###/>/saml/info" -NameIDFormat Unspecified -NameIDExpr "HTTP.REQ.USER.ATTRIBUTE(1)" -samlBinding REDIRECT -serviceProviderID "https://<###ShareFile_FQDN###/>/saml/info"
add authentication samlIdPPolicy AUTHP_SAML_ShareFile -rule "HTTP.REQ.URL.CONTAINS(\"/saml/\") && HTTP.REQ.URL.QUERY.VALUE(\"ACS\").TO_LOWER.EQ(\"sharefile\")" -action AUTHS_SAML_ShareFile
bind vpn vserver NGVS_UG -policy AUTHP_SAML_ShareFile -priority 100 -gotoPriorityExpression END -type REQUEST
add vpn samlSSOProfile ATSP_ShareFile -samlSigningCertName SAML_IdP -assertionConsumerServiceURL "https://<###ShareFile_FQDN###/>/saml/acs" -relaystateRule "\"https://<###ShareFile_FQDN###/>/\"" -samlIssuerName <###IdP_Identifier###/> -audience "https://<###ShareFile_FQDN###/>/saml/info" -NameIDFormat Unspecified -NameIDExpr "HTTP.REQ.USER.ATTRIBUTE(1)" -samlSPCertName SAML_SP_ShareFile
add vpn url URL-ShareFile ShareFile "https://<###ShareFile_FQDN###/>/" -iconURL "/logon/ShareFile.png" -ssotype samlauth -applicationtype SaaS -samlSSOProfile ATSP_ShareFile
bind aaa group Generic_AllUsersGrp -urlName URL-ShareFile
